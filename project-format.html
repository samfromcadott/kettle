<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Tone.js Song</title>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tone/0.10.0/Tone.min.js" charset="utf-8"></script>
</head>
<body>
	<button id="play-button">&#9658;</button>

	<script>
	Tone.Transport.stop()

	$('#play-button').click( () =>{
		if (Tone.Transport.state == "stopped") {
			Tone.Transport.start()
			$('#play-button').html('&#9724;')
		} else if (Tone.Transport.state == "started") {
			Tone.Transport.stop()
			$('#play-button').html('&#9658;')
		}
	})

	function noteToFreq(note) {
		return 2**((note-69)/12) * 440
	}

	// var padSynth = {
	// 	0: {
	// 		name: 'Note',
	// 		type: new Tone.Signal(),
	// 		connect:
	// 	}
	// }

	var padMixer = new Tone.PanVol().toMaster()

	function playPadSynth(freq) {
		var inputFreq = new Tone.Signal(freq)
		var osc = new Tone.Oscillator(440, "square")
		var ampEnv = new Tone.AmplitudeEnvelope()

		inputFreq.connect(osc.frequency)
		osc.connect(ampEnv)
		ampEnv.connect(padMixer)

		osc.start()
		ampEnv.triggerAttackRelease('4n')
	}

	var padPart = new Tone.Part( (time, value) => {
		playPadSynth(noteToFreq(value))
	}, [['0:0', 57], ['0:1', 59], ['0:2', 60], ['0:3', 62], ['1:0', 64], ['1:1', 65], ['1:2', 67], ['1:3', 69]]).start(0)
	</script>
</body>
</html>
